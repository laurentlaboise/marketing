<%- include('../../partials/head', { title, bodyClass: 'dashboard-layout' }) %>
<%- include('../../partials/sidebar', { currentPage, user }) %>

<main class="main-content">
  <%- include('../../partials/header', { user, messages }) %>

  <div class="page-content">
    <div class="page-header">
      <div>
        <h1 class="page-title">Hashtag Manager</h1>
        <p class="page-subtitle">Create and manage reusable hashtag sets for your posts</p>
      </div>
      <div class="page-actions">
        <a href="/social/hashtags/new" class="btn btn-primary"><i class="fas fa-plus"></i> New Hashtag Set</a>
      </div>
    </div>

    <% if (hashtagSets.length > 0) { %>
    <div class="hashtag-grid">
      <% hashtagSets.forEach(set => { %>
      <div class="card hashtag-card">
        <div class="card-body">
          <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
            <div>
              <h3 style="font-size: 16px; font-weight: 600; color: var(--gray-900);"><%= set.name %></h3>
              <% if (set.category) { %>
              <span class="status-badge" style="background: rgba(102, 126, 234, 0.1); color: var(--primary); margin-top: 4px;"><%= set.category %></span>
              <% } %>
            </div>
            <span style="font-size: 12px; color: var(--gray-500);"><%= set.hashtags ? set.hashtags.length : 0 %> tags</span>
          </div>

          <% if (set.description) { %>
          <p style="font-size: 13px; color: var(--gray-600); margin-bottom: 12px;"><%= set.description %></p>
          <% } %>

          <div class="hashtag-chips">
            <% if (set.hashtags && set.hashtags.length > 0) { %>
              <% set.hashtags.slice(0, 10).forEach(tag => { %>
              <span class="hashtag-chip"><%= tag %></span>
              <% }); %>
              <% if (set.hashtags.length > 10) { %>
              <span class="hashtag-chip" style="background: var(--gray-200); color: var(--gray-600);">+<%= set.hashtags.length - 10 %> more</span>
              <% } %>
            <% } %>
          </div>

          <% if (set.platforms && set.platforms.length > 0) { %>
          <div style="margin-top: 12px; display: flex; gap: 6px; flex-wrap: wrap;">
            <% set.platforms.forEach(p => { %>
            <span style="font-size: 11px; padding: 2px 8px; background: var(--gray-100); border-radius: 12px; color: var(--gray-600);"><%= p %></span>
            <% }); %>
          </div>
          <% } %>
        </div>
        <div class="card-footer" style="display: flex; gap: 8px;">
          <a href="/social/hashtags/<%= set.id %>/edit" class="btn btn-sm btn-secondary"><i class="fas fa-edit"></i> Edit</a>
          <button class="btn btn-sm btn-secondary copy-cdn-url" data-url="<%= set.hashtags ? set.hashtags.join(' ') : '' %>"><i class="fas fa-copy"></i> Copy All</button>
          <form action="/social/hashtags/<%= set.id %>/delete" method="POST" style="display: inline; margin-left: auto;">
            <button type="submit" class="btn btn-sm btn-danger" data-confirm-delete="Delete this hashtag set?"><i class="fas fa-trash"></i></button>
          </form>
        </div>
      </div>
      <% }); %>
    </div>
    <% } else { %>
    <div class="card">
      <div class="card-body">
        <div class="empty-state">
          <div class="empty-state-icon"><i class="fas fa-hashtag"></i></div>
          <h3>No Hashtag Sets</h3>
          <p>Create reusable hashtag sets to quickly add to your social posts.</p>
          <a href="/social/hashtags/new" class="btn btn-primary"><i class="fas fa-plus"></i> Create Hashtag Set</a>
        </div>
      </div>
    </div>
    <% } %>
  </div>

  <div id="copyToast" class="copy-toast">
    <i class="fas fa-check-circle"></i> Copied to clipboard
  </div>
</main>

<%- include('../../partials/footer') %>
