<%- include('../partials/head', { title }) %>

<div class="dashboard-layout">
  <%- include('../partials/sidebar') %>

  <div class="main-content">
    <%- include('../partials/header') %>

    <div class="page-content">
      <div class="page-header">
        <div>
          <h1>Social Analytics</h1>
          <p class="page-subtitle">Track performance across platforms and content types</p>
        </div>
        <div class="page-actions">
          <a href="/social/content-hub" class="btn btn-secondary"><i class="fas fa-wand-magic-sparkles"></i> Content Hub</a>
        </div>
      </div>

      <!-- Stats Cards -->
      <div class="stats-grid" style="margin-bottom: 24px;">
        <div class="stat-card">
          <div class="stat-icon" style="background: rgba(32,133,200,0.1); color: var(--primary);"><i class="fas fa-paper-plane"></i></div>
          <div class="stat-info">
            <span class="stat-value"><%= contentStats.reduce((sum, s) => sum + parseInt(s.count || 0), 0) %></span>
            <span class="stat-label">Published Posts</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon" style="background: rgba(16,185,129,0.1); color: var(--success);"><i class="fas fa-mouse-pointer"></i></div>
          <div class="stat-info">
            <span class="stat-value"><%= contentStats.reduce((sum, s) => sum + parseInt(s.clicks || 0), 0) %></span>
            <span class="stat-label">Total Clicks</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon" style="background: rgba(139,92,246,0.1); color: #8b5cf6;"><i class="fas fa-chart-line"></i></div>
          <div class="stat-info">
            <span class="stat-value">$0.00</span>
            <span class="stat-label">AI Cost This Month</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon" style="background: rgba(245,158,11,0.1); color: var(--warning);"><i class="fas fa-bullseye"></i></div>
          <div class="stat-info">
            <span class="stat-value">--</span>
            <span class="stat-label">Avg. CTR</span>
          </div>
        </div>
      </div>

      <!-- Content Performance -->
      <div class="card" style="margin-bottom: 24px;">
        <div class="card-header"><h3>Content Performance</h3></div>
        <div class="card-body">
          <% if (contentStats.length > 0) { %>
          <div class="table-container">
            <table class="table">
              <thead>
                <tr>
                  <th>Content Type</th>
                  <th>Posts</th>
                  <th>Clicks</th>
                </tr>
              </thead>
              <tbody>
                <% contentStats.forEach(function(s) { %>
                <tr>
                  <td><span class="source-badge source-badge-<%= s.source_type || 'standalone' %>"><%= s.source_type || 'Standalone' %></span></td>
                  <td><%= s.count %></td>
                  <td><%= s.clicks || 0 %></td>
                </tr>
                <% }); %>
              </tbody>
            </table>
          </div>
          <% } else { %>
          <div class="empty-state">
            <div class="empty-state-icon"><i class="fas fa-chart-bar"></i></div>
            <h3>No Data Yet</h3>
            <p>Publish posts from the Content Hub to start tracking performance.</p>
            <a href="/social/content-hub" class="btn btn-primary">Go to Content Hub</a>
          </div>
          <% } %>
        </div>
      </div>

      <!-- Quick Links -->
      <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 12px;">
        <a href="/social/analytics/dashboard" class="card" style="text-decoration: none; text-align: center; padding: 20px;">
          <i class="fas fa-chart-line" style="font-size: 24px; color: var(--primary); margin-bottom: 8px;"></i>
          <div style="font-weight: 600; color: var(--gray-700);">Full Dashboard</div>
          <div style="font-size: 12px; color: var(--gray-400);">Platform stats, top posts, AI costs</div>
        </a>
        <a href="/social/retargeting" class="card" style="text-decoration: none; text-align: center; padding: 20px;">
          <i class="fas fa-users" style="font-size: 24px; color: #8b5cf6; margin-bottom: 8px;"></i>
          <div style="font-weight: 600; color: var(--gray-700);">Retargeting</div>
          <div style="font-size: 12px; color: var(--gray-400);">Build custom audiences</div>
        </a>
        <a href="/social/templates" class="card" style="text-decoration: none; text-align: center; padding: 20px;">
          <i class="fas fa-copy" style="font-size: 24px; color: var(--success); margin-bottom: 8px;"></i>
          <div style="font-weight: 600; color: var(--gray-700);">Templates</div>
          <div style="font-size: 12px; color: var(--gray-400);">Reusable post templates</div>
        </a>
        <a href="/social/ai-settings" class="card" style="text-decoration: none; text-align: center; padding: 20px;">
          <i class="fas fa-robot" style="font-size: 24px; color: var(--warning); margin-bottom: 8px;"></i>
          <div style="font-weight: 600; color: var(--gray-700);">AI Providers</div>
          <div style="font-size: 12px; color: var(--gray-400);">Manage AI engines + costs</div>
        </a>
      </div>
    </div>
  </div>
</div>

<style>
.source-badge-standalone { background: var(--gray-100); color: var(--gray-600); }
.source-badge-article { background: #dbeafe; color: #1e40af; }
.source-badge-glossary { background: #d1fae5; color: #065f46; }
.source-badge-ai_tool { background: #ede9fe; color: #5b21b6; }
.source-badge-guide { background: #ffedd5; color: #9a3412; }
.source-badge-service { background: #fce7f3; color: #9d174d; }
.source-badge {
  font-size: 11px; font-weight: 600; padding: 2px 10px; border-radius: 12px;
  text-transform: uppercase; letter-spacing: 0.5px;
}
</style>

<%- include('../partials/footer') %>
