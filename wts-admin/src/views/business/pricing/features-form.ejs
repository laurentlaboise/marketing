<%- include('../../partials/head', { title, bodyClass: 'dashboard-layout' }) %>
<%- include('../../partials/sidebar', { currentPage, user }) %>

<main class="main-content">
  <%- include('../../partials/header', { user, messages }) %>

  <div class="page-content">
    <div class="page-header">
      <div>
        <h1 class="page-title"><%= feature ? 'Edit Pricing Feature' : 'New Pricing Feature' %></h1>
        <p class="page-subtitle"><a href="/business/pricing-features"><i class="fas fa-arrow-left"></i> Back to Feature Catalog</a></p>
      </div>
    </div>

    <div class="card form-card">
      <div class="card-body">
        <form action="<%= feature ? '/business/pricing-features/' + feature.id : '/business/pricing-features' %>" method="POST">

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="category_name">Category Name *</label>
              <input type="text" id="category_name" name="category_name" class="form-input" value="<%= feature ? feature.category_name : '' %>" required placeholder="e.g. Business Tools">
            </div>
            <div class="form-group">
              <label class="form-label" for="category_icon">Category Icon</label>
              <input type="text" id="category_icon" name="category_icon" class="form-input" value="<%= feature ? (feature.category_icon || 'fas fa-cog') : 'fas fa-cog' %>" placeholder="fas fa-briefcase">
            </div>
            <div class="form-group">
              <label class="form-label" for="category_sort_order">Category Sort Order</label>
              <input type="number" id="category_sort_order" name="category_sort_order" class="form-input" value="<%= feature ? (feature.category_sort_order || 0) : 0 %>">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="feature_key">Feature Key * <small style="color:#666;">(unique identifier, e.g. virtual_card)</small></label>
              <input type="text" id="feature_key" name="feature_key" class="form-input" value="<%= feature ? feature.feature_key : '' %>" required placeholder="e.g. virtual_card">
            </div>
            <div class="form-group">
              <label class="form-label" for="feature_name">Feature Name * <small style="color:#666;">(display name)</small></label>
              <input type="text" id="feature_name" name="feature_name" class="form-input" value="<%= feature ? feature.feature_name : '' %>" required placeholder="e.g. Virtual Card Pro+ Maintenance">
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="feature_description">Feature Description</label>
            <textarea id="feature_description" name="feature_description" class="form-input" rows="2" placeholder="Brief description shown in the comparison modal"><%= feature ? (feature.feature_description || '') : '' %></textarea>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="sort_order">Sort Order (within category)</label>
              <input type="number" id="sort_order" name="sort_order" class="form-input" value="<%= feature ? (feature.sort_order || 0) : 0 %>">
            </div>
            <div class="form-group">
              <label class="form-label" for="status">Status</label>
              <select id="status" name="status" class="form-input">
                <option value="active" <%= !feature || feature.status === 'active' ? 'selected' : '' %>>Active</option>
                <option value="inactive" <%= feature && feature.status === 'inactive' ? 'selected' : '' %>>Inactive</option>
              </select>
            </div>
          </div>

          <div class="form-actions">
            <a href="/business/pricing-features" class="btn btn-secondary">Cancel</a>
            <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Save Feature</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</main>

<%- include('../../partials/footer') %>
